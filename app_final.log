âš ï¸ Using simple cache (no Redis)

============================================================
ğŸš€ Starting Dash Dashboard...
============================================================
   URL: http://localhost:8050
   Press Ctrl+C to stop
============================================================

Dash is running on http://127.0.0.1:8050/

INFO:dash.dash:Dash is running on http://127.0.0.1:8050/

 * Serving Flask app 'app'
 * Debug mode: on
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:ğŸ“Š DataFrame created with 3872 rows and 10 columns
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-12-2024 to 30-11-2025
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:ğŸ“Š DataFrame created with 3872 rows and 10 columns
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-12-2024 to 30-11-2025
INFO:avante_api:âœ… Successfully fetched 3735 Avante records
INFO:avante_api:ğŸ“Š DataFrame created with 3735 rows and 10 columns
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2024 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-07-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:âœ… Successfully fetched 3735 Avante records
INFO:avante_api:ğŸ“Š DataFrame created with 3735 rows and 10 columns
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2024 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-07-2025 to 31-12-2025
INFO:avante_api:ğŸ“¥ Fetching Avante sales data: 01-01-2025 to 31-12-2025
INFO:avante_api:âœ… Successfully fetched 2665 Avante records
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:ğŸ“Š DataFrame created with 3872 rows and 10 columns
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
âš ï¸ Using simple cache (no Redis)

============================================================
ğŸš€ Starting Dash Dashboard...
============================================================
   URL: http://localhost:8050
   Press Ctrl+C to stop
============================================================


ğŸ”„ DASH UPDATE TRIGGERED by: 
   Range: 01-01-2025 to 31-12-2025
   Hide Innovative: False
   Hide Avante (IOSPL only): False
   Refresh clicks: 0
ğŸ”„ Fetching data from Avante API for 01-01-2025 to 31-12-2025

ğŸ”„ DASH UPDATE TRIGGERED by: 
   Range: 01-01-2025 to 31-12-2025
   Hide Innovative: False
   Hide Avante (IOSPL only): False
   Refresh clicks: 0
ğŸ”„ Fetching data from Avante API for 01-01-2025 to 31-12-2025
   ğŸ“… Added synthetic Date column: 2025-12-31
âœ… Data fetched successfully from Avante API: 3872 rows
   Data fetched: 3872 rows (cached)
   Available columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   Revenue: Rs. 23.13 Cr
   Quantity: 7.81 Lakh
ğŸ”„ Fetching data from Avante API for 01-12-2024 to 30-11-2025
   ğŸ“… Added synthetic Date column: 2025-12-31
âœ… Data fetched successfully from Avante API: 3872 rows
   Data fetched: 3872 rows (cached)
   Available columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   Revenue: Rs. 23.13 Cr
   Quantity: 7.81 Lakh
ğŸ”„ Fetching data from Avante API for 01-12-2024 to 30-11-2025
   ğŸ“… Added synthetic Date column: 2025-11-30
âœ… Data fetched successfully from Avante API: 3735 rows
   Has date data: True
   Date column sample: 0   2025-12-31
1   2025-12-31
2   2025-12-31
3   2025-12-31
4   2025-12-31
Name: Date, dtype: datetime64[ns]
   Valid dates: 3872 out of 3872

ğŸ“Š PREPARING CHART DATA:
   DataFrame shape: (3872, 11)
   DataFrame columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   VALUE_COL: Value
   QTY_COL: Qty
   Dashboard mode: overall
   Sample data (first 2 rows):
[{'cust_id': '38', 'id': '12', 'Dealer Name': 'ALTIVATE MEDICARE', 'City': 'VADODARA', 'State': 'GUJARAT', 'Category': 'Bone Screw', 'Product': '3.5mm Cortical Screw 20TPI, Self Tapping', 'Code': 'ASC.101-E', 'Qty': 56, 'Value': 1412.13, 'Date': Timestamp('2025-12-31 00:00:00')}, {'cust_id': '38', 'id': '15', 'Dealer Name': 'ALTIVATE MEDICARE', 'City': 'VADODARA', 'State': 'GUJARAT', 'Category': 'Bone Screw', 'Product': '4.5mm Cortical Screw Self Tapping', 'Code': 'ASC.102-E', 'Qty': 84, 'Value': 2506.55, 'Date': Timestamp('2025-12-31 00:00:00')}]
   Chart data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   Number of records in chart_data: 3872
   Number of unique dealers: 174
   Number of unique states: 33
âœ… Chart data prepared successfully


MAP CALLBACK TRIGGERED
   Dashboard Mode: Avante
   Metric: Revenue, Level: State
   Dates: 2025-01-01T00:00:00 to 2025-12-31T00:00:00
   Username: u2vp8kb, Hide Innovative: False
   Fetching data from 01-01-2025 to 31-12-2025...
ğŸ” Fetching inactive dealers data from 01-01-2024 to 31-12-2025
ğŸ“Š Time Comparative Analysis - period_type=quarter, num_periods=2, category_filter=None, metric=both

ğŸ“Š UPDATE_FILTERED_CHARTS CALLED:
   chart_data type: <class 'dict'>
   chart_data is None: False
   chart_data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   chart_data has 'data' key: True
   chart_data['data'] length: 3872
   chart_data['data'] type: <class 'list'>
   Filters - dealer: None, state: None, category: None
   Converting chart_data['data'] to DataFrame...
   DataFrame shape: (3872, 11)
   DataFrame columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   VALUE_COL: Value
   ğŸ“ˆ Creating charts from 3872 records
   ğŸ“Š VALUE_COL=Value, QTY_COL=Qty
   ğŸ¯ IOSPL Mode: False
   ğŸ“… Added synthetic Date column: 2025-11-30
âœ… Data fetched successfully from Avante API: 3735 rows
   Has date data: True
   Date column sample: 0   2025-12-31
1   2025-12-31
2   2025-12-31
3   2025-12-31
4   2025-12-31
Name: Date, dtype: datetime64[ns]
   Valid dates: 3872 out of 3872

ğŸ“Š PREPARING CHART DATA:
   DataFrame shape: (3872, 11)
   DataFrame columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   VALUE_COL: Value
   QTY_COL: Qty
   Dashboard mode: overall
   Sample data (first 2 rows):
[{'cust_id': '38', 'id': '12', 'Dealer Name': 'ALTIVATE MEDICARE', 'City': 'VADODARA', 'State': 'GUJARAT', 'Category': 'Bone Screw', 'Product': '3.5mm Cortical Screw 20TPI, Self Tapping', 'Code': 'ASC.101-E', 'Qty': 56, 'Value': 1412.13, 'Date': Timestamp('2025-12-31 00:00:00')}, {'cust_id': '38', 'id': '15', 'Dealer Name': 'ALTIVATE MEDICARE', 'City': 'VADODARA', 'State': 'GUJARAT', 'Category': 'Bone Screw', 'Product': '4.5mm Cortical Screw Self Tapping', 'Code': 'ASC.102-E', 'Qty': 84, 'Value': 2506.55, 'Date': Timestamp('2025-12-31 00:00:00')}]
   Chart data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   Number of records in chart_data: 3872
   Number of unique dealers: 174
   Number of unique states: 33
âœ… Chart data prepared successfully


MAP CALLBACK TRIGGERED
   Dashboard Mode: Avante
   Metric: Revenue, Level: State
   Dates: 2025-01-01T00:00:00 to 2025-12-31T00:00:00
   Username: u2vp8kb, Hide Innovative: False
   Fetching data from 01-01-2025 to 31-12-2025...

ğŸ“Š UPDATE_FILTERED_CHARTS CALLED:
   chart_data type: <class 'dict'>
   chart_data is None: False
   chart_data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   chart_data has 'data' key: True
   chart_data['data'] length: 3872
   chart_data['data'] type: <class 'list'>
   Filters - dealer: None, state: None, category: None
   Converting chart_data['data'] to DataFrame...
   DataFrame shape: (3872, 11)
   DataFrame columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   VALUE_COL: Value
   ğŸ“ˆ Creating charts from 3872 records
   ğŸ“Š VALUE_COL=Value, QTY_COL=Qty
   ğŸ¯ IOSPL Mode: False
ğŸ” Fetching inactive dealers data from 01-01-2024 to 31-12-2025
ğŸ“Š Time Comparative Analysis - period_type=quarter, num_periods=2, category_filter=None, metric=both
   ğŸ“¦ Fetched 2665 records from API
ğŸ“… Added synthetic Date column to time comparative: 2025-12-31T00:00:00
   âš ï¸ No 'Category' column found in data
   âœ… Showing all categories: 2665 records
   ğŸ“Š Comparison table: 447 products found
   âœ… Returning content with 0 category options

ğŸ”½ POPULATING FILTER OPTIONS:
   chart_data type: <class 'dict'>
   chart_data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   Dealer options count: 174
   State options count: 33
   City options count: 144
   Category options count: 13
   Sample dealer options (first 3): [{'label': '3SRMEDITECH', 'value': '3SRMEDITECH'}, {'label': 'A. R SURGICALS', 'value': 'A. R SURGICALS'}, {'label': 'A.R. INTERNATIONAL', 'value': 'A.R. INTERNATIONAL'}]
âœ… Filter options populated


ğŸ“Š UPDATE_FILTERED_CHARTS CALLED:
   chart_data type: <class 'dict'>
   chart_data is None: False
   chart_data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   chart_data has 'data' key: True
   chart_data['data'] length: 3872
   chart_data['data'] type: <class 'list'>
   Filters - dealer: None, state: None, category: None
   Converting chart_data['data'] to DataFrame...
   DataFrame shape: (3872, 11)
   DataFrame columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   VALUE_COL: Value
   ğŸ“ˆ Creating charts from 3872 records
   ğŸ“Š VALUE_COL=Value, QTY_COL=Qty
   ğŸ¯ IOSPL Mode: False
   API Response success: True
   Data rows received: 3872
ğŸ“… Added synthetic Date column to slow-moving: 2025-12-31T00:00:00
   DataFrame columns after mapping: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'parent_category', 'category_name', 'meta_keyword', 'Qty', 'Value']Traceback (most recent call last):
  File "/Users/bhurvasharma/dashboard/app.py", line 4176, in update_slow_moving_items
    VALUE_COL: 'sum',
    ^^^^^^^^^
NameError: name 'VALUE_COL' is not defined
INFO:avante_api:âœ… Successfully fetched 2665 Avante records
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:ğŸ“Š DataFrame created with 3872 rows and 10 columns
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
Traceback (most recent call last):
  File "/Users/bhurvasharma/dashboard/app.py", line 4176, in update_slow_moving_items
    VALUE_COL: 'sum',
    ^^^^^^^^^
NameError: name 'VALUE_COL' is not defined
INFO:avante_api:âœ… Successfully fetched 3872 Avante records
INFO:avante_api:âœ… Successfully fetched 5282 Avante records
INFO:avante_api:âœ… Successfully fetched 5282 Avante records
Error in slow-moving items: name 'VALUE_COL' is not defined

   Unique States: 33
   Unique Cities: 147
   Creating map: metric=Revenue, level=State
   ğŸ” Fuzzy matched: 'GUJARAT' -> 'Gujarat'
   ğŸ” Fuzzy matched: 'MAHARASHTRA' -> 'Maharashtra'
   ğŸ” Fuzzy matched: 'KARNATAKA' -> 'Karnataka'
   ğŸ” Fuzzy matched: 'TAMIL NADU' -> 'Tamil Nadu'
   ğŸ” Fuzzy matched: 'ANDHRA PRADESH' -> 'Andhra Pradesh'
   ğŸ” Fuzzy matched: 'WEST BENGAL' -> 'West Bengal'
   ğŸ” Fuzzy matched: 'ODISHA' -> 'Odisha'
   ğŸ” Fuzzy matched: 'MADHYA PRADESH' -> 'Madhya Pradesh'
   ğŸ” Fuzzy matched: 'ASSAM' -> 'Assam'
   ğŸ” Fuzzy matched: 'UTTAR PRADESH' -> 'Uttar Pradesh'
   ğŸ” Fuzzy matched: 'UTTARAKHAND' -> 'Uttarakhand'
   ğŸ” Fuzzy matched: 'CHHATTISGARH' -> 'Chhattisgarh'
   ğŸ” Fuzzy matched: 'TELANGANA' -> 'Telangana'
   ğŸ” Fuzzy matched: 'CHATTISGARH' -> 'Chattisgarh'
   ğŸ” Fuzzy matched: 'RAJASTHAN' -> 'Rajasthan'
   ğŸ” Fuzzy matched: 'HARYANA' -> 'Haryana'
   ğŸ” Fuzzy matched: 'JHARKHAND' -> 'Jharkhand'
   ğŸ” Fuzzy matched: 'BIHAR' -> 'Bihar'
   ğŸ” Fuzzy matched: 'maharastra' -> 'AS'
   ğŸ” Fuzzy matched: 'KERALA' -> 'Kerala'
   ğŸ” Fuzzy matched: 'CHANDIGARH' -> 'GA'
   ğŸ” Fuzzy matched: 'ANDRA PRADESH ' -> 'AN'
   ğŸ” Fuzzy matched: 'PONDICHERRY' -> 'Pondicherry'
   ğŸ” Fuzzy matched: 'GOA' -> 'Goa'
   ğŸ” Fuzzy matched: 'HIMACHAL PRADESH' -> 'Himachal Pradesh'
   ğŸ” Fuzzy matched: 'DELHI' -> 'Delhi'
   ğŸ” Fuzzy matched: 'PUNJAB' -> 'Punjab'
   ğŸ” Fuzzy matched: 'TRIPURA' -> 'Tripura'
   âœ… Created 33 markers out of 33 total locations (showing 100.0%)
   âœ… Map created successfully
   Map type: <class 'dash_leaflet.MapContainer.MapContainer'>
   Map has 3 children
   ğŸ“¦ Fetched 2665 records from API
ğŸ“… Added synthetic Date column to time comparative: 2025-12-31T00:00:00
   âš ï¸ No 'Category' column found in data
   âœ… Showing all categories: 2665 records
   ğŸ“Š Comparison table: 447 products found
   âœ… Returning content with 0 category options

ğŸ”½ POPULATING FILTER OPTIONS:
   chart_data type: <class 'dict'>
   chart_data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   Dealer options count: 174
   State options count: 33
   City options count: 144
   Category options count: 13
   Sample dealer options (first 3): [{'label': '3SRMEDITECH', 'value': '3SRMEDITECH'}, {'label': 'A. R SURGICALS', 'value': 'A. R SURGICALS'}, {'label': 'A.R. INTERNATIONAL', 'value': 'A.R. INTERNATIONAL'}]
âœ… Filter options populated


ğŸ“Š UPDATE_FILTERED_CHARTS CALLED:
   chart_data type: <class 'dict'>
   chart_data is None: False
   chart_data keys: ['data', 'VALUE_COL', 'QTY_COL', 'dashboard_mode', 'dealers', 'states', 'cities', 'categories']
   chart_data has 'data' key: True
   chart_data['data'] length: 3872
   chart_data['data'] type: <class 'list'>
   Filters - dealer: None, state: None, category: None
   Converting chart_data['data'] to DataFrame...
   DataFrame shape: (3872, 11)
   DataFrame columns: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'Category', 'Product', 'Code', 'Qty', 'Value', 'Date']
   VALUE_COL: Value
   ğŸ“ˆ Creating charts from 3872 records
   ğŸ“Š VALUE_COL=Value, QTY_COL=Qty
   ğŸ¯ IOSPL Mode: False
   API Response success: True
   Data rows received: 3872
   DataFrame columns after mapping: ['cust_id', 'id', 'Dealer Name', 'City', 'State', 'parent_category', 'category_name', 'meta_keyword', 'Qty', 'Value']
   Unique States: 33
   Unique Cities: 147
   Creating map: metric=Revenue, level=State
   ğŸ” Fuzzy matched: 'GUJARAT' -> 'Gujarat'
   ğŸ” Fuzzy matched: 'MAHARASHTRA' -> 'Maharashtra'
   ğŸ” Fuzzy matched: 'KARNATAKA' -> 'Karnataka'
   ğŸ” Fuzzy matched: 'TAMIL NADU' -> 'Tamil Nadu'
   ğŸ” Fuzzy matched: 'ANDHRA PRADESH' -> 'Andhra Pradesh'
   ğŸ” Fuzzy matched: 'WEST BENGAL' -> 'West Bengal'
   ğŸ” Fuzzy matched: 'ODISHA' -> 'Odisha'
   ğŸ” Fuzzy matched: 'MADHYA PRADESH' -> 'Madhya Pradesh'
   ğŸ” Fuzzy matched: 'ASSAM' -> 'Assam'
   ğŸ” Fuzzy matched: 'UTTAR PRADESH' -> 'Uttar Pradesh'
   ğŸ” Fuzzy matched: 'UTTARAKHAND' -> 'Uttarakhand'
   ğŸ” Fuzzy matched: 'CHHATTISGARH' -> 'Chhattisgarh'
   ğŸ” Fuzzy matched: 'TELANGANA' -> 'Telangana'
   ğŸ” Fuzzy matched: 'CHATTISGARH' -> 'Chattisgarh'
   ğŸ” Fuzzy matched: 'RAJASTHAN' -> 'Rajasthan'
   ğŸ” Fuzzy matched: 'HARYANA' -> 'Haryana'
   ğŸ” Fuzzy matched: 'JHARKHAND' -> 'Jharkhand'
   ğŸ” Fuzzy matched: 'BIHAR' -> 'Bihar'
   ğŸ” Fuzzy matched: 'maharastra' -> 'AS'
   ğŸ” Fuzzy matched: 'KERALA' -> 'Kerala'
   ğŸ” Fuzzy matched: 'CHANDIGARH' -> 'GA'
   ğŸ” Fuzzy matched: 'ANDRA PRADESH ' -> 'AN'
   ğŸ” Fuzzy matched: 'PONDICHERRY' -> 'Pondicherry'
   ğŸ” Fuzzy matched: 'GOA' -> 'Goa'
   ğŸ” Fuzzy matched: 'HIMACHAL PRADESH' -> 'Himachal Pradesh'
   ğŸ” Fuzzy matched: 'DELHI' -> 'Delhi'
   ğŸ” Fuzzy matched: 'PUNJAB' -> 'Punjab'
   ğŸ” Fuzzy matched: 'TRIPURA' -> 'Tripura'
   âœ… Created 33 markers out of 33 total locations (showing 100.0%)
   âœ… Map created successfully
   Map type: <class 'dash_leaflet.MapContainer.MapContainer'>
   Map has 3 children
ğŸ“… Added synthetic Date column to slow-moving: 2025-12-31T00:00:00
Error in slow-moving items: name 'VALUE_COL' is not defined
âœ… Fetched 5282 records for inactive dealer analysis
ğŸ“… Added synthetic Date column: 2025-12-31T00:00:00
âœ… Processed 5282 valid records with dates and dealer names
ğŸ“… Analyzing inactivity: Orders before 01-12-2025 are considered inactive
ğŸ“Š Found 227 total dealers in the data
âš ï¸ Found 0 inactive dealers (>30 days without orders)
âœ… Fetched 5282 records for inactive dealer analysis
ğŸ“… Added synthetic Date column: 2025-12-31T00:00:00
âœ… Processed 5282 valid records with dates and dealer names
ğŸ“… Analyzing inactivity: Orders before 01-12-2025 are considered inactive
ğŸ“Š Found 227 total dealers in the data
âš ï¸ Found 0 inactive dealers (>30 days without orders)
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/resource_tracker.py:400: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown: {'/mp-2ft34nau'}
  warnings.warn(
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/resource_tracker.py:400: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown: {'/mp-fta8st5_'}
  warnings.warn(
